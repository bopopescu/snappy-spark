description = 'Spark Project External Flume Assembly'

dependencies {
  compile project(subprojectBase + 'snappy-spark-streaming-flume_' + scalaBinaryVersion)
  provided project(subprojectBase + 'snappy-spark-streaming_' + scalaBinaryVersion)

  provided(group: 'commons-lang', name: 'commons-lang', version:'2.6')
  provided(group: 'commons-net', name: 'commons-net', version:'2.2')
  provided(group: 'com.google.protobuf', name: 'protobuf-java', version: '2.5.0')
  provided(group: 'org.apache.avro', name: 'avro', version:'1.7.7') {
    exclude(group: 'org.jboss.netty', module: 'netty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty-util')
    exclude(group: 'org.mortbay.jetty', module: 'servlet-api')
    exclude(group: 'org.apache.velocity', module: 'velocity')
  }
  provided(group: 'org.apache.avro', name: 'avro-ipc', version:'1.7.7') {
    exclude(group: 'org.jboss.netty', module: 'netty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty-util')
    exclude(group: 'org.mortbay.jetty', module: 'servlet-api')
    exclude(group: 'org.apache.velocity', module: 'velocity')
  }
  provided(group: 'org.apache.avro', name: 'avro-mapred', version:'1.7.7', classifier:'hadoop2') {
    exclude(group: 'org.jboss.netty', module: 'netty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty')
    exclude(group: 'org.mortbay.jetty', module: 'jetty-util')
    exclude(group: 'org.mortbay.jetty', module: 'servlet-api')
    exclude(group: 'org.apache.velocity', module: 'velocity')
    exclude(module: 'netty')
  }
  provided(group: 'org.scala-lang', name: 'scala-library', version: scalaVersion)
}

// TODO: shade plugin, and provided flume.deps.scope
