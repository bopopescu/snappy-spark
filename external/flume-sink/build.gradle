description = 'Spark Project External Flume Sink'

dependencies {
  compile(group: 'org.apache.flume', name: 'flume-ng-sdk', version:'1.6.0') {
    exclude(module: 'guava')
    exclude(module: 'libthrift')
  }
  compile(group: 'org.apache.flume', name: 'flume-ng-core', version:'1.6.0') {
    exclude(module: 'guava')
    exclude(module: 'libthrift')
  }

  testCompile group: 'com.google.guava', name: 'guava', version: '14.0.1'
  testCompile group: 'io.netty', name: 'netty', version: '3.5.12.Final'
}

apply plugin: "com.commercehub.gradle.plugin.avro"

// for compatibility with maven generated code, though default "string" seems
// more efficient requiring no conversions
avro.stringType = "charSequence"

/*
task genAvro(type: com.commercehub.gradle.plugin.avro.GenerateAvroProtocolTask) {
  source("src/main/avro")
  outputDir = file("$buildDir/src_managed/main/compiled_avro")
  doFirst {
    outputDir.exists() || outputDir.mkdirs()
  }
}
task genAvroJava(type: com.commercehub.gradle.plugin.avro.GenerateAvroJavaTask) {
  source genAvro.outputDir
  outputDir genAvro.outputDir
}
compileJava.source genAvroJava.outputs.files, sourceSets.main.java
*/

// TODO: also the shade plugin in maven
